{"version":3,"sources":["ui.js","login.js","game.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/*\n  Update the welcome screen with information from friendCache.\n*/\nfunction renderWelcome() {\n  var welcome = $('#welcome');\n  welcome.find('.first_name').html(friendCache.me.first_name);\n  welcome.find('.profile').attr('src',friendCache.me.picture.data.url);\n  welcome.find('.stats .coins').html(Parse.User.current().get('coins'));\n  welcome.find('.stats .bombs').html(Parse.User.current().get('bombs'));\n}\n\n","","$('#btn_lugares').on('click',function(e){\n    $('#tabs a[href=\"#lugares\"]').tab('show');\n});\n\n$('#buscar').on('click',function(e){\n    buscar_lugares($('.lat').html(),$('.lng').html());\n});\n\n$('.media a').on('click',function(e){\n    e.preventDefault();\n    if($(this).hasClass('local')){\n        get_info($(this).attr('href'));\n    }else{\n        detail_info($(this).attr('href'));\n    }\n});\n$('button.visitado').on('click',function(e){\n    e.preventDefault();\n    var res = confirm('Conoces este lugar?');\n    if(res){\n        mark_place($(this).attr('place'));\n    }else{\n        alert('viaja mas');\n    }\n});\n\nfunction mark_place(place_id){\n    $.post('{{ url(\"visited\") }}',{'place_id':place_id,'user_id':1,_token: '{{ Session::token() }}'},function(response){\n        console.log(response);\n    });\n}\n\nfunction get_info(place_id){\n    $.get('{{ url(\"loader\") }}/'+place_id,function(response){\n        console.log('response');\n        console.log(response);\n        $('#tabs a[href=\"#detail\"]').tab('show');\n        var categorias =[];\n        var el = build_detail_from_server(response);\n        $('#detail').html(el);\n        $('button.visitado').on('click',function(e){\n            e.preventDefault();\n            var res = confirm('Conoces este lugar?');\n            if(res){\n                mark_place($(this).attr('place'));\n            }else{\n                alert('viaja mas');\n            }\n        });\n    },'json');\n}\n\nvar map;\nvar infoWindow\nfunction initMap() {\n  map = new google.maps.Map(document.getElementById('mapa'), {\n    center: {lat: -1.2430580707463799 , lng:  -78.6267551779747},\n    zoom: 15\n  });\n\n    map.addListener('zoom_changed', function() {\n        $('.zoom').html(map.getZoom());\n    });\n\n    map.addListener('mousemove', function(e) {\n        $('.lat').html(e.latLng.lat);\n        $('.lng').html(e.latLng.lng);\n    });\n\n    map.addListener('bounds_changed', function(e) {\n        var bounds =map.getBounds(); \n        $('.bounds').html(bounds.b.b+' , '+bounds.b.f+'  ::  '+bounds.f.b+' , '+bounds.f.f);\n    });\n\n  infoWindow = new google.maps.InfoWindow({map: map});\n  \n\n  // Try HTML5 geolocation.\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n    var pos = {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n    };\n\n    map.setCenter(pos);\n\n    }, function() {\n      handleLocationError(true, infoWindow, map.getCenter());\n    });\n  } else {\n    // Browser doesn't support Geolocation\n    handleLocationError(false, infoWindow, map.getCenter());\n  }\n\n}\n\n\nfunction build_detail_from_server(place){\n    var el = '<div class=\"panel';\n    el += '\"><div class=\"panel-heading\"><h3>'+place.name;\n    el += '<button type=\"button\" place=\"'+place.google_id+'\" class=\"visitado pull-right btn btn-info\">Visitado</button>';\n    el +='</h3></div><div class=\"panel-body\">';\n    if(typeof place.imagen!== \"undefined\")\n        el += '<img class=\"img-responsive\" src=\"'+place.imagen+'\">';\n    el += '<ul class=\"list-group\">';\n    el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-home\"></i> '+place.direccion+'</li>';\n    if (typeof place.telefono !== 'undefined' )\n        el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-earphone\"></i> '+place.telefono+'</li>';\n    el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-globe\"></i> <a href=\"'+place.website+'\">website</a></li>';\n    el += '<li class=\"list-group-item\">Categorias: ';\n        el += '<ul >';\n        for (var i = 0; i < place.cats.length; i++) {\n            el += '<li><a href=\"#\" >'+place.cats[i]+'</a></li>';\n        };\n        el += '</ul>';\n    el += '</li>';\n    el += '</ul><hr>';\n    el += '</div></div>';\n    return el;\n}\n\nfunction detail_info(place_id){\n    //'ChIJN1t_tDeuEmsRUsoyG83frY4'\n    var request = {\n        placeId: place_id\n    };\n\n    service = new google.maps.places.PlacesService(map);\n    service.getDetails(request, callback);\n\n    function callback(place, status) {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n        $('#tabs a[href=\"#detail\"]').tab('show');\n        var categorias =[];\n        var el = '<div class=\"panel\"><div class=\"panel-heading\"><h3>';\n        el += '<button type=\"button\" place=\"'+place.place_id+'\" class=\"visitado pull-right btn btn-info\">Visitado</button>';\n        el += place.name+'</h3></div><div class=\"panel-body\">';\n        if(typeof place.photos!== \"undefined\")\n            el += '<img class=\"img-responsive\" src=\"'+place.photos[0].getUrl({'maxWidth': 200, 'maxHeight': 250})+'\">';\n        el += '<ul class=\"list-group\">';\n        el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-home\"></i> '+place['formatted_address']+'</li>';\n        if (typeof place.international_phone_number !== 'undefined' )\n            el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-earphone\"></i> '+place['international_phone_number']+'</li>';\n        if (typeof place.formatted_phone_number !== 'undefined' )\n            el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-earphone\"></i> '+place['formatted_phone_number']+'</li>';\n        el += '<li class=\"list-group-item\"><i class=\"glyphicon glyphicon-globe\"></i> <a href=\"'+place['website']+'\">website</a></li>';\n        el += '<li class=\"list-group-item\">Categorias: ';\n            el += '<ul >';\n            for (var i = 0; i < place.types.length; i++) {\n                el += '<li><a href=\"#\" >'+place.types[i]+'</a></li>';\n                categorias.push(place.types[i]);\n            };\n            el += '</ul>';\n        el += '</li>';\n        el += '</ul><hr>';\n        el += '</div></div>';\n        $('#detail').html(el);\n        var img='';\n         if(typeof place.photos!== \"undefined\"){\n            img = place.photos[0].getUrl({'maxWidth': 200, 'maxHeight': 250});\n            console.log('img: '+img);\n         }\n            $.post('{{ url(\"loader\") }}/'+place.place_id,{\n                name : place.name,\n                place_id : place.place_id,\n                vecinity : place.vicinity,\n                imagen:img,\n                direccion : place.formatted_address,\n                telefono : place.formatted_phone_number,\n                categorias: categorias,\n                web : place.website,\n                _token: '{{ Session::token() }}'\n            },function(response){\n                console.log(response);\n            });\n            $('button.visitado').on('click',function(e){\n                e.preventDefault();\n                var res = confirm('Conoces este lugar?');\n                if(res){\n                    mark_place($(this).attr('place'));\n                }else{\n                    alert('viaja mas');\n                }\n            });\n      }\n    }\n}\n\nfunction buscar_lugares(lat,lng){\n    console.log('lat: '+lat);\n    console.log('lng: '+lng);\n    var service = new google.maps.places.PlacesService(map);\n        service.nearbySearch({\n          location: {lat: parseFloat(lat) , lng: parseFloat(lng)},\n          radius: $('#radio').val(),\n          type: [$('#tipo').val()]\n    }, callback);\n}\n\nfunction callback(results, status) {\n    var items = [];\n    if (status === google.maps.places.PlacesServiceStatus.OK) {\n      for (var i = 0; i < results.length; i++) {\n        items.push({\n            'place_id':results[i].place_id,\n            'name':results[i].name,\n        });\n        console.log('-------------------------------------------------------');\n        var item = '<div class=\"media\"><div class=\"media-left\"><a href=\"'+results[i]['place_id'];\n         if(typeof results[i].photos !== \"undefined\"){\n            item += '\"><img class=\"media-object\" src=\"'+results[i].photos[0].getUrl({'maxWidth': 50, 'maxHeight': 50});\n         }else{\n            item += '\"><img class=\"media-object\" src=\"'+results[i].icon ;\n         }\n        item += '\" alt=\"'+results[i].name+'\"></a></div><div class=\"media-body\">';\n        item += '<h4 class=\"media-heading\">'+results[i].name+'</h4>';\n        item += results[i].vicinity + '</div></div>';\n        $('#lugares').append(item);\n        createMarker(results[i]);\n\n        $.post('{{ url(\"loader\") }}',{\n            name : results[i].name,\n            place_id : results[i].place_id,\n            vecinity : results[i].vicinity,\n            icon : results[i].icon,\n            _token: '{{ Session::token() }}',\n            lat: results[i].geometry.location.lat(),\n            lng: results[i].geometry.location.lng(),\n            type:$('#tipo').val()\n        },function(response){\n            console.log(response);\n        });\n\n      }\n        $('.media a').on('click',function(e){\n            e.preventDefault();\n            if($(this).hasClass('local')){\n\n            }else{\n                detail_info($(this).attr('href'));\n            }\n        });\n    }\n}\n\nfunction createMarker(place) {\n    var placeLoc = place.geometry.location;\n    var marker = new google.maps.Marker({\n      map: map,\n      position: place.geometry.location,\n      place_id: place.place_id,\n      icon: place.icon\n    });\n    google.maps.event.addListener(marker, 'click', function() {\n      infoWindow.setContent(place.name);\n      infoWindow.open(map, this);\n      detail_info(place.place_id);\n    });\n}\n\nfunction handleLocationError(browserHasGeolocation, infoWindow, pos) {\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(browserHasGeolocation ?\n                        'Error: The Geolocation service failed.' :\n                        'Error: Your browser doesn\\'t support geolocation.');\n}"]}